<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>取消请求</title>
</head>
<body>
<button>点击发送</button>
<button>点击取消</button>
<script>
    const btns = document.querySelectorAll('button');
    var x;
    let isSending = false;  //是否正在发送AJAX请求
    btns[0].onclick = ()=>{
        if (isSending) x.abort();
        x = new XMLHttpRequest();
        isSending = true;
        x.open('GET','http://127.0.0.1:8000/delay');
        x.send();
        x.onreadystatechange = ()=>{
            if (x.readyState === 4){
                isSending = false;
            }
        }
    }
</script>
</body>
</html>